# Comparison of .NET Components of Generating JSON schema from POCO.

The JSON data is CodeGen.json that is the CodeGen definition of [WebApiClientGen](https://github.com/zijianhuang/webapiclientgen), and the schemas are those generated by various .NET components

The comparison is done through the following:
1. The JSOn file has a reference to the schema file, and display and edit the JSON data in Visual Studio Code
2. Online validator on: https://www.jsonschemavalidator.net/
3. Online validator on: https://jsonschema.dev/

## [.NET 9 Extract SChema](https://learn.microsoft.com/en-us/dotnet/standard/serialization/system-text-json/extract-schema)

```json
{
  "type": [
    "object",
    "null"
  ],
  "properties": {
    "ClientApiOutputs": {
      "type": [
        "object",
        "null"
      ],
      "properties": {
        "ClientLibraryProjectFolderName": {
          "type": [
            "string",
            "null"
          ]
        },
        "FileName": {
          "type": [
            "string",
            "null"
          ]
        },
        "GenerateBothAsyncAndSync": {
          "type": "boolean"
        },
```

By default:
* All string fields are nullable and can be absent, unless required.
* All value type fields can be absent and must have a value, unless nullable, unless required.


### Nullable Value Type

```json
        "StringAsString": {
          "type": "boolean"
        },
        "CamelCase": {
          "type": [
            "boolean",
            "null"
          ]
        },
```

### For Required Field

It honours JsonRequiredAttribute of .NET, and create the following:

```json
            "properties": {
              "AssemblyName": {
                "type": [
                  "string",
                  "null"
                ]
              },

            },
            "required": [
              "AssemblyName"
            ]
```

Remarks:
* Visual Studio Code does not care about the missing required field.
* Visual Studio cares and enforces. For new entry, only after inputting the required fields, the optional fields will appear in intellisense.
* https://www.jsonschemavalidator.net/ pick the missing field.


### For Enum Field

```json
              "CherryPickingMethods": {
                "type": [
                  "integer",
                  "null"
                ]
              },
```


Overall it is good.

## [NJsonSchema](https://github.com/RicoSuter/NJsonSchema)

It declares schema version and a default title.

```json
{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "CodeGenSettings",
  "definitions": {
    "CodeGenOutputs": {
      "allOf": [
        {
          "$ref": "#/definitions/ModelGenOutputs"
        },
        {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "ClientLibraryProjectFolderName": {
              "type": [
                "null",
                "string"
              ]
            },
```

### For Enum fields

```json
        "CherryPickingMethods": {
          "enum": [
            "All",
            "DataContract",
            "NewtonsoftJson",
            "Serializable",
            "AspNet",
            "NetCore",
            "ApiOnly",
            null
          ]
        },
```

### Nullable boolean and Alike

```json
            "StringAsString": {
              "type": "boolean"
            },
            "CamelCase": {
              "type": [
                "boolean",
                "null"
              ]
            },
```

## [NewtonSoft.Json](https://www.newtonsoft.com/jsonschema)

```json
{
  "definitions": {
    "CodeGenConfig": {
      "type": [
        "object",
        "null"
      ],
      "properties": {
        "ExcludedControllerNames": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": [
              "string",
              "null"
            ]
          }
        },
        "DataModelAssemblyNames": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": [
              "string",
              "null"
            ]
          }
        },
```

By default:
* All string fields are required. This is undesired.

Therefore:
* https://www.jsonschemavalidator.net/ reports 5 errors
* https://jsonschema.dev/ reports 26 errors, however, this validator is "The home of JSON Schema validation right in your browser ðŸš§ Alpha ðŸš§ draft-7 only"

### For Required Field
It honours JsonRequiredAttribute and RequiredAttribute, but not `DataMember(IsRequired = true)` and generate the following:
```json
        "AssemblyName": {
          "type": "string"
        },
```

Remarks:
* In Visual Studio Code, giving it null the editor won't complain.
* Visual Studio can pick the invalid null value.
* https://www.jsonschemavalidator.net/ pick the missing field, and the invalid null value.

However, all other sibling fields are required:
```json
      "required": [
        "AssemblyName",
        "TargetDir",
        "TSFile",
        "ContentType",
        "AsModule",
        "ClientNamespaceSuffix",
        "ContainerNameSuffix",
        "DataAnnotationsToComments",
        "HelpStrictMode",
        "NgDateOnlyFormControlEnabled"
      ]
```
I am not sure yet if there's a setting in the component to correct, since it might be possible that this component prefer nullable object of C# 8.

### Nullable boolean and Alike

```json
        "StringAsString": {
          "type": "boolean"
        },
        "CamelCase": {
          "type": [
            "boolean",
            "null"
          ]
        },
```
## [JSON Everything](https://json-everything.net/)

Online validator on: https://jsonschema.net/

```json
{
  "type": "object",
  "properties": {
    "ApiSelections": {
      "type": "object",
      "properties": {
        "ExcludedControllerNames": {
          "$ref": "#/$defs/arrayOfString"
        },
        "DataModelAssemblyNames": {
          "$ref": "#/$defs/arrayOfString"
        },
        "DataModels": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "AssemblyName": {
                "type": "string"
              },

```

### Nullable boolean and alike

```json
        "StringAsString": {
          "type": "boolean"
        },
        "CamelCase": {
          "type": [
            "boolean",
            "null"
          ]
        },
```

### For Required Field

It does not care about JsonRequiredAttribute and RequiredAttribute. However, all string fields are required:

## Summary

For nullable boolean and alike, all can generate correct codes allowing null.

Some schemas generated declares [Schema Identification](https://json-schema.org/understanding-json-schema/structuring#schema-identification), while others don't by default.

NJsonSchema uses literal enum.